<!--

<div class="flex gap-2 ml-12 pt-3 justify-end pb-0">
    <%= link_to "Your Rooms", hospital_rooms_path, class: "text-slate-100 bg-blue-500 hover:text-blue-700 hover:bg-white active:bg-blue-600 font-bold py-2 px-4 mx-2" %>
    <%= link_to "List a new room", new_room_path, class: "text-slate-100 bg-blue-500 hover:text-blue-700 hover:bg-white active:bg-blue-600 font-bold py-2 px-4 mx-2" %>
</div>
-->

<div class="flex pt-0 mt-0">
  <div class="flex flex-col flex-1">

    <p class="text-2xl font-bold ml-12 mt-12 ">Upcoming Bookings</p>

  <p class="text-xl mt-12 mx-12"><%= current_user.rooms.any? ? "#{current_user.rooms.first.facility_name}" : "Welcome to your hospital's page , add your first room."%>
  <%= current_user.first_name %> <%= current_user.last_name %></p>



  <div class="flex gap-4 ml-12">
        <%= link_to "Your Rooms", hospital_rooms_path, class: "
          inline-block
          rounded
          bg-slate-500
          px-6
          pb-2
          mt-4
          pt-2.5
          text-xs
          font-medium
          uppercase
          leading-normal
          text-white
          shadow-[0_4px_9px_-4px_#3b71ca]
          transition
          duration-150
          ease-in-out
          hover:bg-primary-600
          hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
          focus:bg-primary-600
          focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
          focus:outline-none
          focus:ring-0
          active:bg-primary-700
          active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
        " %>

        <%= link_to "List a new room", new_room_path, class: "
          inline-block
          rounded
          bg-slate-500
          px-6
          pb-2
          mt-4
          pt-2.5
          text-xs
          font-medium
          uppercase
          leading-normal
          text-white
          shadow-[0_4px_9px_-4px_#3b71ca]
          transition
          duration-150
          ease-in-out
          hover:bg-primary-600
          hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
          focus:bg-primary-600
          focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
          focus:outline-none
          focus:ring-0
          active:bg-primary-700
          active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
        " %>
  </div>


<ul class="ml-8 mt-12 nav tabs-underlined" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <span class="nav-link tab-underlined active" id="bookings-tab" data-bs-toggle="tab" data-bs-target="#bookings-tab-pane" role="tab" aria-controls="bookings-tab-pane" aria-selected="true">Bookings</span>
  </li>
  <li class="nav-item" role="presentation">
    <span class="nav-link tab-underlined" id="requests-tab" data-bs-toggle="tab" data-bs-target="#requests-tab-pane" role="tab" aria-controls="requests-tab-pane" aria-selected="false">Requests</span>
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade py-3 show active" id="bookings-tab-pane" role="tabpanel" aria-labelledby="bookings-tab" tabindex="0">
    <p class="text-2xl font-bold ml-12 mt-12"><%= @upcomming.any? ? "Your upcoming bookings" : "No bookings yet"%></p>

    <% @upcomming.each do |booking| %>
    <div
      class="
        block
        rounded-lg
        bg-white
        p-6
        w-96
        ml-12
        my-8
        shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)]
      ">
      <h5
        class="
          mb-2
          text-xl
          font-bold
          leading-tight
          text-neutral-800
        ">
        <%= booking.room.category %>
      </h5>
      <p class="mb-4 text-base text-neutral-600 dark:text-neutral-200">
        <p>Room: <%= booking.room.name %></p>
        <p>Date: <%= booking.date %></p>
        <p>Time: <%= booking.startFrom %></p>
        <p>Duration: <%= booking.hours %> hours</p>
        <p class="text-neutral-600">Details: <%= booking.comment %></p>

        <p><%= booking.comment %></p>
      </p>
      <button
        type="button"
        class="
          inline-block
          rounded
          bg-red-500
          px-6
          pb-2
          mt-4
          pt-2.5
          text-xs
          font-medium
          uppercase
          leading-normal
          text-white
          shadow-[0_4px_9px_-4px_#3b71ca]
          transition
          duration-150
          ease-in-out
          hover:bg-primary-600
          hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
          focus:bg-primary-600
          focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
          focus:outline-none
          focus:ring-0
          active:bg-primary-700
          active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
        "
        data-te-ripple-init
        data-te-ripple-color="light">
        <%= link_to "Cancel", booking_path(booking), data: { turbo_method: :delete, turbo_confirm: "Cancel your appointment for room: #{booking.room.name}?" }  %>
      </button>
    </div>
  <% end %>


  </div>
  <div class="tab-pane fade py-3" id="requests-tab-pane" role="tabpanel" aria-labelledby="requests-tab" tabindex="0">
      <p class="text-2xl font-bold ml-12"> <%= @requests.any? ? "Pending Requests" : "No requests yet"%> </p>

 <% @requests.each do |request| %>
    <div
      class="
        block
        rounded-lg
        bg-white
        p-6
        w-96
        ml-12
        my-8
        shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)]
      ">
      <h5
        class="
          mb-4
          text-xl
          font-bold
          leading-tight
          text-neutral-800
        ">
        <%= request.room.category %>
      </h5>
      <p class="mb-1 text-base text-blue-800">
        Status: <%= request.status %>
      </p>
        <p>Room: <%= request.room.name %></p>
        <p>Date: <%= request.date %></p>
        <p>Time: <%= request.startFrom %></p>
        <p>Duration: <%= request.hours %> hours</p>

      <p class="mb-1 pb-0 text-base text-neutral-600">
        Details: <%= request.comment %>
      </p>
      <% if request.pending? %>
        <%= simple_form_for [:hospital, request] do |f| %>
        <p class="mb-2 pt-0 text-base text-neutral-800">
          <div class="flex gap-2">
          <%= f.input :status, as: :hidden, input_html: { value: 'confirmed'} %>
          <%= f.submit 'Accept', class: 'inline-block
          rounded
          bg-slate-500
          px-6
          pb-2
          mt-4
          pt-2.5
          text-xs
          font-medium
          uppercase
          leading-normal
          text-white
          shadow-[0_4px_9px_-4px_#3b71ca]
          transition
          duration-150
          ease-in-out
          hover:bg-primary-600
          hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
          focus:bg-primary-600
          focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
          focus:outline-none
          focus:ring-0
          active:bg-primary-700
          active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]' %>
          </p>
        <% end %>
        <%= simple_form_for request do |f| %>
          <%= f.input :status, as: :hidden, input_html: { value: 'rejected'} %>
          <%= f.submit 'Reject', class: ' inline-block
          rounded
          bg-red-500
          px-6
          pb-2
          mt-4
          pt-2.5
          text-xs
          font-medium
          uppercase
          leading-normal
          text-white
          shadow-[0_4px_9px_-4px_#3b71ca]
          transition
          duration-150
          ease-in-out
          hover:bg-primary-600
          hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
          focus:bg-primary-600
          focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]
          focus:outline-none
          focus:ring-0
          active:bg-primary-700
          active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]' %>
        <% end %>
      <% else %>
        <p class='booking-tag'><%= request.status %></p>
      <% end %>
      </div>
    </div>
  <% end %>

  </div>
</div>

  </div>

  <div class="flex-1 container mt-12 mr-16">

  <h1 class="text-2xl font-bold mb-8">My Calendar:</h1>
  <%= month_calendar(events: @bookings) do |date, bookings| %>
    <%= date.day %>
    <% bookings.each do |booking| %>
      <p class="font-semibold text-sm"><%= booking.room.name %></p>
    <% end %>
  <% end %>
</div>
</div>

<script>
  // Initialization for ES Users
  import {
    Ripple,
    initTE,
  } from "tw-elements";

  initTE({ Ripple });
</script>
